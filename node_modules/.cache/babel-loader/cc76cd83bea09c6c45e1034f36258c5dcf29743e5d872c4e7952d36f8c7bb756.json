{"ast":null,"code":"var _jsxFileName = \"/Users/ogesvind/Desktop/mychatapp/chatapp/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport './App.css';\nimport Messages from './Messages';\nimport { randomColor, randomName } from './Random';\nimport Input from './Input';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [member, setMember] = useState({\n    username: randomName(),\n    color: randomColor()\n  });\n\n  //The 'drone' object construction makes the dependencies of useEffect Hook (at line 43) change on every render. To fix this, wrap the initialization of 'drone' in its own useMemo() Hook.\n  const drone = useMemo(() => {\n    return new window.Scaledrone('mKoCVA8scRizu5DS', {\n      data: member\n    });\n  }, []);\n  useEffect(() => {\n    drone.on('open', error => {\n      if (error) {\n        return console.error(error);\n      }\n      const updatedMember = {\n        ...member\n      };\n      updatedMember.id = drone.clientId;\n      setMember(updatedMember);\n    });\n    const room = drone.subscribe('observable-room');\n    room.on('data', (data, member) => {\n      setMessages(prevMessages => [...prevMessages, {\n        text: data,\n        member: member,\n        timestamp: Date.now()\n      }]);\n    });\n  }, [drone, member]);\n  const onSendMessage = message => {\n    if (message.trim() !== '') {\n      drone.publish({\n        room: 'observable-room',\n        message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Messages, {\n      messages: messages,\n      currentMember: member\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      onSendMessage: onSendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 3\n  }, this);\n};\n_s(App, \"LBrGLPRMajQIAktnZM+yEsi19DM=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Messages","randomColor","randomName","Input","jsxDEV","_jsxDEV","App","_s","messages","setMessages","member","setMember","username","color","drone","window","Scaledrone","data","on","error","console","updatedMember","id","clientId","room","subscribe","prevMessages","text","timestamp","Date","now","onSendMessage","message","trim","publish","className","children","currentMember","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ogesvind/Desktop/mychatapp/chatapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport './App.css';\nimport Messages from './Messages';\nimport { randomColor, randomName } from './Random';\nimport Input from './Input';\n\nconst App = () => {\n\tconst [messages, setMessages] = useState([]);\n\tconst [member, setMember] = useState({\n\t\tusername: randomName(),\n\t\tcolor: randomColor(),\n\t});\n\n\t//The 'drone' object construction makes the dependencies of useEffect Hook (at line 43) change on every render. To fix this, wrap the initialization of 'drone' in its own useMemo() Hook.\n\tconst drone = useMemo(() => {\n\t\treturn new window.Scaledrone('mKoCVA8scRizu5DS', {\n\t\t\tdata: member,\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tdrone.on('open', (error) => {\n\t\t\tif (error) {\n\t\t\t\treturn console.error(error);\n\t\t\t}\n\t\t\tconst updatedMember = { ...member };\n\t\t\tupdatedMember.id = drone.clientId;\n\t\t\tsetMember(updatedMember);\n\t\t});\n\n\t\tconst room = drone.subscribe('observable-room');\n\n\t\troom.on('data', (data, member) => {\n\t\t\tsetMessages((prevMessages) => [\n\t\t\t\t...prevMessages,\n\t\t\t\t{\n\t\t\t\t\ttext: data,\n\t\t\t\t\tmember: member,\n\t\t\t\t\ttimestamp: Date.now(),\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\t}, [drone, member]);\n\n\tconst onSendMessage = (message) => {\n\t\tif (message.trim() !== '') {\n\t\t\tdrone.publish({\n\t\t\t\troom: 'observable-room',\n\t\t\t\tmessage,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Messages messages={messages} currentMember={member} />\n\t\t\t<Input onSendMessage={onSendMessage} />\n\t\t</div>\n\t);\n};\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,OAAO,WAAW;AAClB,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,WAAW,EAAEC,UAAU,QAAQ,UAAU;AAClD,OAAOC,KAAK,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5B,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACa,MAAM,EAAEC,SAAS,CAAC,GAAGd,QAAQ,CAAC;IACpCe,QAAQ,EAAEV,UAAU,CAAC,CAAC;IACtBW,KAAK,EAAEZ,WAAW,CAAC;EACpB,CAAC,CAAC;;EAEF;EACA,MAAMa,KAAK,GAAGf,OAAO,CAAC,MAAM;IAC3B,OAAO,IAAIgB,MAAM,CAACC,UAAU,CAAC,kBAAkB,EAAE;MAChDC,IAAI,EAAEP;IACP,CAAC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENZ,SAAS,CAAC,MAAM;IACfgB,KAAK,CAACI,EAAE,CAAC,MAAM,EAAGC,KAAK,IAAK;MAC3B,IAAIA,KAAK,EAAE;QACV,OAAOC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MAC5B;MACA,MAAME,aAAa,GAAG;QAAE,GAAGX;MAAO,CAAC;MACnCW,aAAa,CAACC,EAAE,GAAGR,KAAK,CAACS,QAAQ;MACjCZ,SAAS,CAACU,aAAa,CAAC;IACzB,CAAC,CAAC;IAEF,MAAMG,IAAI,GAAGV,KAAK,CAACW,SAAS,CAAC,iBAAiB,CAAC;IAE/CD,IAAI,CAACN,EAAE,CAAC,MAAM,EAAE,CAACD,IAAI,EAAEP,MAAM,KAAK;MACjCD,WAAW,CAAEiB,YAAY,IAAK,CAC7B,GAAGA,YAAY,EACf;QACCC,IAAI,EAAEV,IAAI;QACVP,MAAM,EAAEA,MAAM;QACdkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MACrB,CAAC,CACD,CAAC;IACH,CAAC,CAAC;EACH,CAAC,EAAE,CAAChB,KAAK,EAAEJ,MAAM,CAAC,CAAC;EAEnB,MAAMqB,aAAa,GAAIC,OAAO,IAAK;IAClC,IAAIA,OAAO,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MAC1BnB,KAAK,CAACoB,OAAO,CAAC;QACbV,IAAI,EAAE,iBAAiB;QACvBQ;MACD,CAAC,CAAC;IACH;EACD,CAAC;EAED,oBACC3B,OAAA;IAAK8B,SAAS,EAAC,KAAK;IAAAC,QAAA,gBACnB/B,OAAA,CAACL,QAAQ;MAACQ,QAAQ,EAAEA,QAAS;MAAC6B,aAAa,EAAE3B;IAAO;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACvDpC,OAAA,CAACF,KAAK;MAAC4B,aAAa,EAAEA;IAAc;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnC,CAAC;AAER,CAAC;AAAClC,EAAA,CArDID,GAAG;AAAAoC,EAAA,GAAHpC,GAAG;AAuDT,eAAeA,GAAG;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}