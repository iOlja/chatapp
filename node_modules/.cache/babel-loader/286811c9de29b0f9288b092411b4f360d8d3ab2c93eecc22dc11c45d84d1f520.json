{"ast":null,"code":"var _jsxFileName = \"/Users/ogesvind/Desktop/mychatapp/chatapp/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport './App.css';\nimport Messages from \"./Messages\";\nimport { randomColor, randomName } from './Random';\nimport Input from \"./Input\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst [isTyping, setIsTyping] = useState(false);\nconst App = () => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [member, setMember] = useState({\n    username: randomName(),\n    color: randomColor()\n  });\n\n  //The 'drone' object construction makes the dependencies of useEffect Hook (at line 43) change on every render. To fix this, wrap the initialization of 'drone' in its own useMemo() Hook.\n  const drone = useMemo(() => {\n    return new window.Scaledrone(\"mKoCVA8scRizu5DS\", {\n      data: member\n    });\n  }, []);\n  useEffect(() => {\n    drone.on('open', error => {\n      if (error) {\n        return console.error(error);\n      }\n      const updatedMember = {\n        ...member\n      };\n      updatedMember.id = drone.clientId;\n      setMember(updatedMember);\n    });\n    const room = drone.subscribe(\"observable-room\");\n    room.on('data', (data, member) => {\n      setMessages(prevMessages => [...prevMessages, {\n        text: data,\n        member: member,\n        timestamp: Date.now()\n      }]);\n    });\n\n    // Cleanup function to unsubscribe from the room when component unmounts\n    // return () => {\n    //   room.unsubscribe();\n    // };\n  }, [drone, member]);\n  const onSendMessage = message => {\n    if (message.trim() !== \"\") {\n      drone.publish({\n        room: \"observable-room\",\n        message\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Messages, {\n      messages: messages,\n      currentMember: member\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Input, {\n      onSendMessage: onSendMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(App, \"hauM1eDqtSl1mNgOSDPv57RYg5s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Messages","randomColor","randomName","Input","jsxDEV","_jsxDEV","isTyping","setIsTyping","App","_s","messages","setMessages","member","setMember","username","color","drone","window","Scaledrone","data","on","error","console","updatedMember","id","clientId","room","subscribe","prevMessages","text","timestamp","Date","now","onSendMessage","message","trim","publish","className","children","currentMember","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ogesvind/Desktop/mychatapp/chatapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport './App.css';\nimport Messages from \"./Messages\";\nimport { randomColor, randomName } from './Random';\nimport Input from \"./Input\";\nconst [isTyping, setIsTyping] = useState(false);\n\n\nconst App = () => {\n  const [messages, setMessages] = useState([]);\n  const [member, setMember] = useState({\n    username: randomName(),\n    color: randomColor()\n  });\n\n  //The 'drone' object construction makes the dependencies of useEffect Hook (at line 43) change on every render. To fix this, wrap the initialization of 'drone' in its own useMemo() Hook.\n  const drone = useMemo(() => {\n    return new window.Scaledrone(\"mKoCVA8scRizu5DS\", {\n      data: member\n    });\n  }, []);\n\n  useEffect(() => {\n    drone.on('open', (error) => {\n      if (error) {\n        return console.error(error);\n      }\n      const updatedMember = { ...member };\n      updatedMember.id = drone.clientId;\n      setMember(updatedMember);\n    });\n\n    const room = drone.subscribe(\"observable-room\");\n\n    room.on('data', (data, member) => {\n      setMessages(prevMessages => [\n        ...prevMessages,\n        {\n          text: data,\n          member: member,\n          timestamp: Date.now() \n        }\n      ]);\n    });\n\n    // Cleanup function to unsubscribe from the room when component unmounts\n    // return () => {\n    //   room.unsubscribe();\n    // };\n  }, [drone, member]);\n\n  const onSendMessage = (message) => {\n    if (message.trim() !== \"\") {\n      drone.publish({\n        room: \"observable-room\",\n        message,\n      });\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Messages\n        messages={messages}\n        currentMember={member}\n      />\n      <Input\n        onSendMessage={onSendMessage}\n      />\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,QAAQ,OAAO;AAC3D,OAAO,WAAW;AAClB,OAAOC,QAAQ,MAAM,YAAY;AACjC,SAASC,WAAW,EAAEC,UAAU,QAAQ,UAAU;AAClD,OAAOC,KAAK,MAAM,SAAS;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC5B,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;AAG/C,MAAMW,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,MAAM,EAAEC,SAAS,CAAC,GAAGhB,QAAQ,CAAC;IACnCiB,QAAQ,EAAEZ,UAAU,CAAC,CAAC;IACtBa,KAAK,EAAEd,WAAW,CAAC;EACrB,CAAC,CAAC;;EAEF;EACA,MAAMe,KAAK,GAAGjB,OAAO,CAAC,MAAM;IAC1B,OAAO,IAAIkB,MAAM,CAACC,UAAU,CAAC,kBAAkB,EAAE;MAC/CC,IAAI,EAAEP;IACR,CAAC,CAAC;EACJ,CAAC,EAAE,EAAE,CAAC;EAENd,SAAS,CAAC,MAAM;IACdkB,KAAK,CAACI,EAAE,CAAC,MAAM,EAAGC,KAAK,IAAK;MAC1B,IAAIA,KAAK,EAAE;QACT,OAAOC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MAC7B;MACA,MAAME,aAAa,GAAG;QAAE,GAAGX;MAAO,CAAC;MACnCW,aAAa,CAACC,EAAE,GAAGR,KAAK,CAACS,QAAQ;MACjCZ,SAAS,CAACU,aAAa,CAAC;IAC1B,CAAC,CAAC;IAEF,MAAMG,IAAI,GAAGV,KAAK,CAACW,SAAS,CAAC,iBAAiB,CAAC;IAE/CD,IAAI,CAACN,EAAE,CAAC,MAAM,EAAE,CAACD,IAAI,EAAEP,MAAM,KAAK;MAChCD,WAAW,CAACiB,YAAY,IAAI,CAC1B,GAAGA,YAAY,EACf;QACEC,IAAI,EAAEV,IAAI;QACVP,MAAM,EAAEA,MAAM;QACdkB,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;MACtB,CAAC,CACF,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA;IACA;IACA;EACF,CAAC,EAAE,CAAChB,KAAK,EAAEJ,MAAM,CAAC,CAAC;EAEnB,MAAMqB,aAAa,GAAIC,OAAO,IAAK;IACjC,IAAIA,OAAO,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE,EAAE;MACzBnB,KAAK,CAACoB,OAAO,CAAC;QACZV,IAAI,EAAE,iBAAiB;QACvBQ;MACF,CAAC,CAAC;IACJ;EACF,CAAC;EAED,oBACE7B,OAAA;IAAKgC,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBjC,OAAA,CAACL,QAAQ;MACPU,QAAQ,EAAEA,QAAS;MACnB6B,aAAa,EAAE3B;IAAO;MAAA4B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvB,CAAC,eACFtC,OAAA,CAACF,KAAK;MACJ8B,aAAa,EAAEA;IAAc;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC9B,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACC,CAAC;AAEV,CAAC;AAAClC,EAAA,CA/DID,GAAG;AAAAoC,EAAA,GAAHpC,GAAG;AAiET,eAAeA,GAAG;AAAC,IAAAoC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}